# 功能需求规格说明

## 1. 用户认证与授权

### 1.1 用户注册
- 支持邮箱注册
- 选择用户角色（Student/Parent/Tutor）
- 创建用户配置文件

### 1.2 用户登录
- 邮箱/用户名登录
- 记住登录状态
- 密码重置功能

### 1.3 角色权限
| 功能 | Student | Parent | Tutor |
|------|---------|--------|-------|
| 上传题目 | ✓ | ✓ | ✓ |
| 答题 | ✓ | - | ✓ |
| 查看自己的题目 | ✓ | ✓ | ✓ |
| 查看学生进度 | - | ✓ | ✓ |
| 添加讲解 | - | - | ✓ |
| 分享题目 | ✓ | ✓ | ✓ |

## 2. 题目管理核心功能

### 2.1 题目上传（优先级：HIGH）

#### 功能描述
学生/家长/导师可以通过手机拍照上传题目

#### 用户故事
> 作为学生，当我在做题时遇到难题，我希望能快速拍照上传，以便稍后复习和向导师请教。

#### 需求细节
- **上传方式**
  - 📱 移动端：相机拍照直接上传
  - 💻 桌面端：选择本地图片文件
  - 支持多图片上传（一道题可能多页）
  
- **题目信息**
  - 自动识别上传时间
  - 选择科目（Reading/Writing/Maths/Thinking Skills）
  - 添加标题（可选）
  - 添加标签（如：代数、几何、阅读理解等）
  - 设置难度（1-5星）
  
- **图片处理**
  - 自动压缩优化
  - 支持裁剪和旋转
  - 存储原图和缩略图

### 2.2 题目浏览（优先级：HIGH）

#### 用户故事
> 作为学生，我想浏览我上传的所有题目，按科目和时间筛选，快速找到需要复习的内容。

#### 功能需求
- **浏览视图**
  - 列表视图（显示缩略图、标题、科目、日期）
  - 网格视图（图片墙）
  - 详细视图（完整信息）
  
- **筛选选项**
  - 按科目筛选
  - 按难度筛选
  - 按状态筛选（已答/未答/已掌握/需复习）
  - 按时间范围筛选
  
- **排序选项**
  - 最新上传
  - 最早上传
  - 难度从高到低
  - 错误率从高到低
  - 最近复习时间

### 2.3 题目详情查看（优先级：HIGH）

#### 功能需求
- 显示高清题目图片（支持缩放）
- 显示题目元数据（科目、难度、上传时间、标签）
- 显示答题记录
- 显示评论和笔记
- 显示导师讲解（如有）
- 显示相关题目推荐

### 2.4 题目答题（优先级：MEDIUM）

#### 用户故事
> 作为学生，我想在线记录我的答案和解题思路，以便导师点评和自我回顾。

#### 功能需求
- **答题界面**
  - 显示题目图片
  - 答案输入区（富文本编辑器）
  - 支持上传答题过程照片
  - 标记答题时间
  
- **答题记录**
  - 保存多次答题记录
  - 记录答题时长
  - 标记正确/错误
  - 查看历史答题
  
- **自我评估**
  - 标记难度（是否为难题）
  - 标记掌握程度
  - 添加个人笔记

### 2.5 题目搜索（优先级：MEDIUM）

#### 功能需求
- **搜索方式**
  - 关键词搜索（搜索标题、标签、笔记）
  - 高级搜索（组合多个条件）
  - 智能搜索建议
  
- **搜索结果**
  - 高亮匹配关键词
  - 按相关度排序
  - 快速预览

### 2.6 题目评论与笔记（优先级：MEDIUM）

#### 功能需求
- **个人笔记**
  - 添加文字笔记
  - 支持富文本格式
  - 私密性（仅自己可见）
  
- **评论功能**
  - 学生可提问
  - 导师可回答
  - 家长可查看
  - 支持@提及用户
  
- **导师讲解**
  - 导师添加专业讲解
  - 支持步骤分解
  - 支持上传讲解图片

### 2.7 题目评分（优先级：LOW）

#### 功能需求
- 对题目质量评分（1-5星）
- 对题目难度评分（1-5星）
- 查看平均评分
- 筛选高质量题目

### 2.8 题目分享（优先级：MEDIUM）

#### 功能需求
- **分享给用户**
  - 搜索用户
  - 选择多个用户
  - 添加分享说明
  
- **分享链接**
  - 生成分享链接
  - 设置访问权限
  - 设置有效期
  
- **题目集合**
  - 创建题目集
  - 批量分享题目集

## 3. 学习重点管理（优先级：HIGH）

### 3.1 智能标记

#### 功能需求
- **自动标记**
  - 错误次数≥2次：标记为"易错题"
  - 用户主动标记难度≥4星：标记为"难题"
  - 答题时长超过平均值2倍：标记为"耗时题"
  
- **手动标记**
  - 学生可手动标记"需要复习"
  - 导师可标记"重点题目"
  - 家长可标记"家长关注"

### 3.2 复习推荐系统

#### 用户故事
> 作为学生，我希望系统能根据我的答题情况，智能推荐我需要复习的题目，提高复习效率。

#### 推荐算法逻辑
```
复习优先级 = 错误率权重 × 0.4 
           + 难度系数 × 0.3 
           + 时间衰减因子 × 0.2
           + 掌握程度 × 0.1
```

- **错误率权重**：错误次数越多，优先级越高
- **难度系数**：难度越高，优先级越高
- **时间衰减因子**：距离上次复习时间越长，优先级越高
- **掌握程度**：掌握程度越低，优先级越高

#### 功能需求
- Dashboard显示推荐复习题目（Top 10）
- 每个科目显示推荐题目
- 生成每日复习计划
- 复习提醒通知

### 3.3 学习统计与可视化

#### 功能需求
- **总体统计**
  - 总题目数量
  - 已答题目数量
  - 正确率
  - 学习天数
  
- **科目统计**
  - 各科目题目分布
  - 各科目正确率
  - 各科目薄弱知识点
  
- **趋势分析**
  - 每日/周/月答题数量趋势
  - 正确率趋势
  - 学习时长趋势
  
- **可视化图表**
  - 饼图：科目分布
  - 柱状图：每日答题量
  - 折线图：正确率趋势
  - 热力图：活跃时间分布

## 4. Dashboard仪表板（优先级：HIGH）

### 4.1 学生Dashboard

#### 显示内容
- 欢迎信息和激励语
- 今日推荐复习题目（Top 5）
- 学习统计概览
- 近期上传题目
- 各科目进度概览
- 薄弱知识点提醒
- 学习目标进度

### 4.2 家长Dashboard

#### 显示内容
- 孩子学习概况
- 最近学习活动
- 薄弱科目提醒
- 导师评价和反馈
- 学习时长统计

### 4.3 导师Dashboard

#### 显示内容
- 学生列表
- 待回答问题
- 最近分享的题目
- 学生进度概览

## 5. 科目板块（优先级：MEDIUM）

### 5.1 Reading板块
- 题目类型分类（文本理解、词汇、推理等）
- 按文章类型筛选

### 5.2 Writing板块
- 题目类型（创意写作、议论文、叙述文）
- 写作示例库
- 导师点评

### 5.3 Maths板块
- 知识点分类（代数、几何、统计等）
- 公式参考
- 解题步骤

### 5.4 Thinking Skills板块
- 题型分类（逻辑推理、模式识别、问题解决）
- 思维导图工具

## 6. AI功能预留（优先级：LOW - 未来实现）

### 6.1 AI题目解析接口

#### 预留功能
- 图片文字识别（OCR）
- 题目类型自动识别
- 自动提取题目元数据

### 6.2 AI答题辅导模块

#### 预留功能
- AI提示和引导
- 解题步骤建议
- 错误分析

### 6.3 智能推荐算法升级

#### 预留功能
- 机器学习优化推荐算法
- 个性化学习路径
- 知识图谱构建

## 7. 通知系统（优先级：LOW）

### 功能需求
- 复习提醒
- 导师回复通知
- 学习目标提醒
- 系统公告

## 8. 设置与配置（优先级：LOW）

### 功能需求
- 个人信息管理
- 头像上传
- 密码修改
- 通知偏好设置
- 学习目标设置
- 隐私设置

## 功能优先级总结

### MVP（最小可行产品）- Phase 1
1. ✅ 用户认证（注册、登录、角色管理）
2. ✅ 题目上传（拍照上传）
3. ✅ 题目浏览（筛选、排序）
4. ✅ 题目详情查看
5. ✅ 基础Dashboard
6. ✅ 智能标记（难题、易错题）
7. ✅ 复习推荐

### Phase 2
1. 题目答题功能
2. 评论与笔记
3. 题目分享
4. 学习统计可视化
5. 科目板块细化

### Phase 3
1. AI功能接口
2. 通知系统
3. 高级统计分析
4. 题目评分系统
